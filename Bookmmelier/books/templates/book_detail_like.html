
{% if request.user.is_authenticated %}
<div id="book_like">
    <p>{{ book.like_users.count}}명이 좋아합니다.</p>   
    {% if request.user in book.like_users.all %}
        <input type="button" value="좋아요 취소" onclick="book_dislike('{{request.user.id}}','{{book.isbn13}}')">
    {% else %}
        <input type="button" value="좋아요" onclick="book_like('{{request.user.id}}','{{book.isbn13}}')">        
    {% endif %}
</div>
{%endif%}

<script>
    const book_like = (id,isbn13) =>{
        $.ajax({
                type:"POST",
                url: "{% url 'books:book_like' %}",
                data : {'id': id,'isbn13': isbn13, csrfmiddlewaretoken:'{{ csrf_token }}'},
                success:function(data){  
                    alert('좋아요')
                    $('#book_like').html(data);
                }
        });
    }
    const book_dislike = (id,isbn13) =>{
        $.ajax({
                type:"POST",
                url: "{% url 'books:book_dislike' %}",
                data : {'id': id,'isbn13': isbn13, csrfmiddlewaretoken:'{{ csrf_token }}'},
                success:function(data){  
                    alert('싫어요')
                    $('#book_like').html(data);
                }
        });
    }
</script>
